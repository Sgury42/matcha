(this.webpackJsonpmatcha=this.webpackJsonpmatcha||[]).push([[0],{181:function(e,t,a){e.exports=a(265)},257:function(e,t){},265:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),i=a(20),l=a(6),s=a(323),u=a(165),m=a(88),f=a(89),p=a(90),d=Object(u.a)(),g=Object(u.a)({palette:{primary:{main:m.a[900],light:m.a[700]},secondary:{main:f.a[700],light:p.a[500]}},overrides:{MuiAppBar:{colorDefault:{backgroundColor:"transparent",boxShadow:"none"}},MuiCard:{root:{marginTop:d.spacing(5),padding:15,width:"100%",height:"fit-content"}}}}),E=a(55),h=a(324),b=a(8),O=a(300),j=a(302),v=a(305),y=a(28),w=a.n(y),x=a(16),k=a(12),T=a(298),C=a(329),P=a(92),S=a(330),_=a(304),A=a(328),I=a(326),N=a(17),B=a.n(N),D=a(31),M=a(23),U=a.n(M),L=function(e,t){return{type:"SET_OBJECT",object:t,objectName:e}},H=function(e,t){return{type:"UPDATE_OBJECT",object:t,objectName:e}},G=function(e){return{type:"REMOVE_OBJECT",objectName:e}},F=a(9),R=a.n(F),q=a(146),z=function(e,t){return function(a){U.a.post("http://localhost:8080"+e,t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}).then((function(t){switch(e){case"/accounts/login/":R.a.set("token",t.data.token),a(W()),window.location.href="http://localhost:3000/create-profile";break;case"/accounts/register/":a(L("alert","Check your mail box !")),a(L("status","registrationOK"));break;case"/accounts/forgotPasswd":a(L("alert","Check your mail box !"));break;default:console.log(t)}})).catch((function(t){switch(e){case"/accounts/login/":!t.response||404!==t.response.status&&403!==t.response.status?a(L("alert","Oups try again !")):a(L("alert","Are you sure you already have an account?"));break;case"/accounts/register/":console.log(t),t.response&&a(L("alert",t.response.data?t.response.data:"Oups something went wrong !"));break;case"/accounts/forgotPasswd":a(L("alert","Oups something went wrong !"));break;default:console.log(t)}}))}};function W(){return function(){var e=Object(D.a)(B.a.mark((function e(t){var a,n,r,c,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.a.get("token")){e.next=2;break}return e.abrupt("return",t(L("auth",!1)));case 2:return e.prev=2,e.next=5,Promise.all([U.a.get("http://localhost:8080/accounts/params/",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}),U.a.get("http://localhost:8080/accounts/getProfilePicture/",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}),U.a.get("http://localhost:8080/accounts/pictures",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}})]);case 5:if(a=e.sent,n=Object(b.a)(a,3),r=n[0],c=n[1],o=n[2],!c.data[0]){e.next=15;break}return e.next=13,t(L("currentUser",Object(k.a)({},r.data,{profilePicture:c.data[0].url_picture,pictures:o.data})));case 13:e.next=17;break;case 15:return e.next=17,t(L("currentUser",Object(k.a)({},r.data,{pictures:o.data})));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0),t(L("auth",!1));case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}()}var V=function(e,t,a){return function(n){if(!R.a.get("token"))return n(L("auth",!1));U.a.get("http://localhost:8080"+e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then(function(){var r=Object(D.a)(B.a.mark((function r(c){var o,i;return B.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("/matchs"!==e){r.next=9;break}if(!c.data.length){r.next=7;break}return o=[],r.next=5,c.data.forEach(function(){var e=Object(D.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date(t.lastConnection),(n=t).lastConnection=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(a),e.next=5,o.push(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return r.next=7,n(L("matches",o));case 7:r.next=21;break;case 9:if("/cibles"!==e){r.next=20;break}if(!c.data.length){r.next=18;break}return i=[],r.next=14,c.data.forEach(function(){var e=Object(D.a)(B.a.mark((function e(n){var r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.getPreciseDistance)(t,n.location);case 2:if(!((r=e.sent)<1e3*a)){e.next=8;break}return(c=n).distance=r,e.next=8,i.push(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:return r.next=16,i.sort((function(e,t){return e.score>t.score?-1:1}));case 16:return r.next=18,n(L("cibles",i));case 18:r.next=21;break;case 20:"/notifications"===e&&n(L("notifications",c.data));case 21:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}},J=function(e){return function(t){if(!R.a.get("token"))return t(L("auth",!1));U.a.put("http://localhost:8080/accounts/hashtags/",e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(a){t(H("currentUser",{hashtags:e.hashtags}))})).catch((function(e){console.log(e)}))}},K=function(e,t){return function(a){if(!R.a.get("token"))return a(L("auth",!1));U.a.put("http://localhost:8080"+e,t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(n){switch(e){case"/accounts/passwd/":a(L("alert","password updated !"));break;case"/accounts/mail/":a(L("alert","email updated !")),a(H("currentUser",t));break;case"/accounts/userLogin/":a(L("alert","Hi "+t.login)),a(H("currentUser",t));break;case"/accounts/research/agemin/":a(H("currentUser",{research_age_min:t.research_ageMin}));break;case"/accounts/research/agemax":a(H("currentUser",{research_age_max:t.research_ageMax}));break;case"/accounts/locations":a(H("currentUser",{location:t}));break;case"/accounts/research/perimeter/":a(H("currentUser",{research_perimeter:t.research_perimeter}));break;case"/accounts/research/gender/":case"/accounts/description/":a(H("currentUser",t));break;case"/notifications/read":break;default:console.log(t)}})).catch((function(e){console.log(e.response)}))}},Y=function(e,t){return function(a){if(!R.a.get("token"))return a(L("auth",!1));U.a.delete("http://localhost:8080/accounts/pictures",{params:e,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(e){var n,r,c;"pictures"===t?a((n="currentUser",r="pictures",c=e.data,{type:"REMOVE_ITEM",item:r,objectName:n,data:c})):"profilePicture"===t&&console.log(e)})).catch((function(e){console.log(e)}))}},Z=function e(t,a,n){return function(r){if(!R.a.get("token"))return r(L("auth",!1));U.a.post("http://localhost:8080"+t,a,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(c){switch(t){case"/likes":r(L("index",n+1)),200===c.status?r(e("/notifications/like",a)):250===c.status&&(r(L("alert","NEW MATCH !")),r(e("/notifications/match",a)),r(V("/matchs")));break;case"/accounts/report":r(L("alert","user reported !"));break;default:console.log(c)}})).catch((function(e){console.log(e)}))}},$=Object(T.a)((function(e){return{box:{margin:"auto",padding:e.spacing(2)},grow:{flexGrow:1},formTitle:{marginBottom:e.spacing(4)}}})),X=function(){var e=Object(E.f)(),t=$(),a=Object(l.b)(),c=Object(l.c)((function(e){return e.objects.alert})),o=Object(l.c)((function(e){return e.objects.location})),i=Object(l.c)((function(e){return e.objects.status})),s=Object(n.useState)(!1),u=Object(b.a)(s,2),m=u[0],f=u[1],p=Object(n.useState)({login:"",firstname:"",name:"",mail:"",passwd:"",repeatPasswd:"",dateBirth:"2002-01-01",gender:"",latitude:0,longitude:0}),d=Object(b.a)(p,2),g=d[0],h=d[1],y=g.login,T=g.firstname,N=g.name,B=g.mail,D=g.passwd,M=g.repeatPasswd,H=g.dateBirth,F=g.gender,q=Object(n.useState)({loginError:null,genderError:null,nameError:null,firstnameError:null,mailError:null,passwdError:null,repeatPasswdError:null}),W=Object(b.a)(q,2),V=W[0],J=W[1];Object(n.useEffect)((function(){R.a.get("token")?e.push("/"):a((function(e){U()("https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyCH94qlFWu_Vp6qeV5NISrdDFChutvy5-0",{method:"POST"}).then((function(t){e(L("location",{latitude:t.data.location.lat,longitude:t.data.location.lng}))})).catch((function(e){return console.log(e)}))}))}),[]),Object(n.useEffect)((function(){"registrationOK"===i&&e.push("/")}),[i]),Object(n.useEffect)((function(){h(Object(k.a)({},g,{latitude:o.latitude?o.latitude:0,longitude:o.longitude?o.longitude:0}))}),[o]);Object(n.useEffect)((function(){c&&f(!0)}),[c]);var K=function(e){h(Object(k.a)({},g,Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:5},r.a.createElement(j.a,{className:t.card},r.a.createElement(C.a,{open:m,autoHideDuration:6e3,transitionDuration:1e3,message:c,onClose:function(){f(!1),a(G("alert"))}}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){var e={};return(y.length<2||y.length>50)&&(e.loginError="2 to 50 characters"),"F"!==F&&"M"!==F&&(e.genderError="gender required"),(!T||T.length<2||T.length>15)&&(e.firstnameError="2 to 15 characters"),(!N||N.length<2||N.length>15)&&(e.nameError="2 to 15 characters"),B&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B)||(e.mailError="email is not valid"),(D.length<5||!/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/.test(D))&&(e.passwdError="min 5 char, 1 Upcase, 1 number"),M&&M===D||(e.repeatPasswdError="passwords don't match"),J(Object(k.a)({},e)),!Object.keys(e).length}()&&a(z("/accounts/register/",g))}},r.a.createElement(P.a,{className:t.formTitle,variant:"h2",align:"center"},"Sign Up !"),r.a.createElement(O.a,{container:!0,id:"infosInput",justify:"center",alignItems:"center",direction:"column"},r.a.createElement(O.a,{item:!0,id:"genderChoice"},r.a.createElement(P.a,{variant:"h5"},"I am..."),r.a.createElement(S.a,{"aria-label":"gender",name:"gender",value:F,onChange:K},r.a.createElement(_.a,{value:"F",control:r.a.createElement(A.a,null),label:"a woman"}),r.a.createElement(_.a,{value:"M",control:r.a.createElement(A.a,null),label:"a man"}))),r.a.createElement(P.a,{variant:"caption",color:"error"},V.genderError),r.a.createElement(I.a,{name:"login",value:y,label:"Login",type:"text",variant:"outlined",margin:"normal",error:Boolean(V.loginError),helperText:V.loginError,required:!0,onChange:K}),r.a.createElement(I.a,{name:"firstname",value:T,label:"First name",type:"text",variant:"outlined",margin:"normal",error:Boolean(V.firstnameError),helperText:V.firstnameError,required:!0,onChange:K}),r.a.createElement(I.a,{name:"name",value:N,label:"Last name",type:"text",variant:"outlined",margin:"normal",error:Boolean(V.nameError),helperText:V.nameError,required:!0,onChange:K}),r.a.createElement(I.a,{name:"mail",value:B,label:"Email",variant:"outlined",margin:"normal",error:Boolean(V.mailError),helperText:V.mailError,required:!0,onChange:K}),r.a.createElement(I.a,{name:"passwd",value:D,label:"Password",type:"password",variant:"outlined",margin:"normal",error:Boolean(V.passwdError),helperText:V.passwdError,required:!0,onChange:K}),r.a.createElement(I.a,{name:"repeatPasswd",value:M,label:"Password confimation",type:"password",variant:"outlined",margin:"normal",error:Boolean(V.repeatPasswdError),helperText:V.repeatPasswdError,required:!0,onChange:K}),r.a.createElement(I.a,{name:"dateBirth",value:H,label:"Birthdate",type:"date",margin:"normal",InputLabelProps:{shrink:!0},required:!0,onChange:K}),r.a.createElement(v.a,{name:"submit",type:"submit"},r.a.createElement(w.a,{color:"secondary"})))))))},Q=a(308),ee=a(309),te=a(310),ae=a(311),ne=a(312),re=a(313),ce=a(314),oe=Object(T.a)((function(e){return{submitButton:{marginTop:e.spacing(2)},link:{marginTop:e.spacing(5)}}})),ie=function(){var e=Object(E.f)(),t=oe(),a=Object(l.b)(),c=Object(n.useState)(!1),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(l.c)((function(e){return e.objects.auth})),m=Object(n.useState)({mail:"",passwd:""}),f=Object(b.a)(m,2),p=f[0],d=f[1],g=p.mail,h=p.passwd,v=function(e){d(Object(k.a)({},p,Object(x.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){u&&e.push("/")}),[u]);var y=function(e,t){"sendNewPasswd"===t?(a(z("/accounts/forgotPasswd",{mail:p.mail})),s(!1)):s(!0)},w=function(){s(!1)};return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:5},r.a.createElement(j.a,{className:t.card},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(z("/accounts/login/",p))}},r.a.createElement(P.a,{variant:"h2",align:"center"},"Log In !"),r.a.createElement(O.a,{container:!0,id:"infosInput",justify:"center",alignItems:"center",direction:"column"},r.a.createElement(I.a,{name:"mail",value:g,label:"Mail",type:"text",variant:"outlined",margin:"normal",required:!0,onChange:v}),r.a.createElement(I.a,{name:"passwd",value:h,label:"Password",type:"password",variant:"outlined",margin:"normal",required:!0,onChange:v}),r.a.createElement(Q.a,{className:t.submitButton,name:"submit",type:"submit",color:"secondary",variant:"outlined"},"Submit"),r.a.createElement(ee.a,{onClick:y,color:"secondary",className:t.link},"I forgot my password !")),r.a.createElement(te.a,{open:i,onClose:w,"aria-labelledby":"form-dialog-title"},r.a.createElement(ae.a,{id:"form-dialog-title"},"Reset password"),r.a.createElement(ne.a,null,r.a.createElement(re.a,null,"To receive a new password enter your email addresse and check your mail box."),r.a.createElement(I.a,{autoFocus:!0,margin:"dense",name:"mail",label:"Email",type:"email",value:g,fullWidth:!0,onChange:v})),r.a.createElement(ce.a,null,r.a.createElement(Q.a,{onClick:w,color:"primary"},"Cancel"),r.a.createElement(Q.a,{onClick:function(e){return y(0,"sendNewPasswd")},color:"secondary"},"Send")))))))},le=a(325),se=a(152),ue=a.n(se),me=a(151),fe=a.n(me),pe=Object(T.a)((function(e){return{grow:{flexGrow:1},formTitle:{marginBottom:e.spacing(4)},profilePicture:{borderRadius:"100%"},flexItem:{display:"flex",alignItems:"center",flexDirection:"column"}}})),de={m:1,style:{width:"25vw",height:"25vw",maxWidth:"20em",maxHeight:"20em"},overflow:"hidden"},ge=function(e){var t=pe(),a=Object(l.b)(),c="https://devshift.biz/wp-content/uploads/2017/04/profile-icon-png-898.png",o=Object(n.useState)({preview:e.profilePicture?e.profilePicture:c}),i=Object(b.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(e.pictures?e.pictures:[]),f=Object(b.a)(m,2),p=f[0],d=f[1],g=Object(n.useState)(p.length),E=Object(b.a)(g,2),h=E[0],y=E[1],x=Object(n.useState)(!1),k=Object(b.a)(x,2),T=k[0],C=k[1],S=Object(n.useState)(""),_=Object(b.a)(S,2),A=_[0],I=_[1];Object(n.useEffect)((function(){C(h>=4)}),[h]),Object(n.useEffect)((function(){d(e.pictures?e.pictures:[])}),[e.pictures]),Object(n.useEffect)((function(){y(p.length)}),[p]),Object(n.useEffect)((function(){u(e.profilePicture?e.profilePicture:c)}),[e.profilePicture]);var N=function(e,t){if(e&&"profileButton"===e.target.id&&e.target.files[0]){A&&I("");var n=new FormData;n.append("file",e.target.files[0],e.target.files[0].name),a(function(e){return function(t){if(!R.a.get("token"))return t(L("auth",!1));U.a.post("http://localhost:8080/accounts/profilePicture",e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(e){t(H("currentUser",{profilePicture:e.data}))})).catch((function(e){console.log(e.response)}))}}(n)),t&&t!==c&&a(Y({url_picture:t},"profilePicture"))}else if(e&&e.target.files[0]){var r=new FormData;r.append("file",e.target.files[0],e.target.files[0].name),a(function(e){return function(t){if(!R.a.get("token"))return t(L("auth",!1));U.a.post("http://localhost:8080/accounts/pictures",e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(e){var a,n,r;t((a="currentUser",n="pictures",r=e.data,{type:"ADD_ITEM",item:n,objectName:a,data:r}))})).catch((function(e){console.log(e)}))}}(r))}};return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"ImageUploadCard"},r.a.createElement(O.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(O.a,{item:!0,xs:12,className:t.flexItem},r.a.createElement(le.a,Object.assign({},de,{borderRadius:"50%"}),r.a.createElement("img",{id:"profilePicture",src:s,alt:"profile",width:"100%"})),r.a.createElement("input",{accept:"image/*",className:t.input,id:"profileButton",type:"file",style:{display:"none"},onChange:function(e){return N(e,s)}}),r.a.createElement("label",{htmlFor:"profileButton"},r.a.createElement(v.a,{component:"span"},r.a.createElement(ue.a,{fontSize:"large"}))),r.a.createElement(P.a,{color:"secondary"},A)),r.a.createElement((function(){for(var e=[],n=function(){var n=Object(b.a)(o[c],2),i=n[0],l=n[1];l&&e.push(r.a.createElement(O.a,{key:"".concat(i),item:!0,xs:6,className:t.flexItem},r.a.createElement(le.a,de,r.a.createElement("img",{alt:"".concat(i),src:"".concat(l),width:"100%"})),r.a.createElement(v.a,{onClick:function(){a(Y({url_picture:l},"pictures"))}},r.a.createElement(fe.a,{fontSize:"large",color:"secondary"}))))},c=0,o=Object.entries(p);c<o.length;c++)n();return r.a.createElement(r.a.Fragment,null,e)}),null),r.a.createElement(O.a,{item:!0,className:t.flexItem,xs:12},r.a.createElement("input",{accept:"image/*",className:t.input,type:"file",id:"uploadButton",style:{display:"none"},onChange:function(e){return N(e)},disabled:T}),r.a.createElement("label",{htmlFor:"uploadButton",style:{justifySelf:"flex-end"}},r.a.createElement(Q.a,{component:"span",disabled:T,variant:"contained",color:"secondary"},"Add pictures ",h," / 4"))),r.a.createElement(O.a,{item:!0,xs:12,className:t.flexItem},r.a.createElement(v.a,{name:"submit",onClick:function(){return function(){if(s===c)return I("Profile Picture is missing !"),!1;a(L("profileStep","description"))}()}},r.a.createElement(w.a,{color:"secondary"})))))))},Ee=a(27),he=Object(T.a)((function(e){return{grow:{flexGrow:1},formTitle:{marginBottom:e.spacing(4)},flexItem:{display:"flex",alignItems:"center",flexDirection:"column"},submitButton:{margin:e.spacing(1)}}})),be=function(e){var t=he(),a=Object(Ee.a)(),c=Object(l.b)(),o=Object(n.useState)({description:e.description?e.description:""}),i=Object(b.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(s.description?s.description.length:0),f=Object(b.a)(m,2),p=f[0],d=f[1];Object(n.useEffect)((function(){u({description:e.description?e.description:""})}),[e.description]);return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"ImageUploadCard"},r.a.createElement(P.a,{className:t.formTitle,variant:"h2",align:"center"},"Describe yourself :"),r.a.createElement(O.a,{container:!0},r.a.createElement(I.a,{type:"text",name:"description",variant:"outlined",fullWidth:!0,multiline:!0,rows:"5",onChange:function(e){e.target.value.length<=150&&(u(Object(k.a)({},s,Object(x.a)({},e.target.name,e.target.value))),d(e.target.value.length))},value:s.description}),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(P.a,{align:"right",style:{color:a.palette.primary.light}},p,"/150")),r.a.createElement(O.a,{item:!0,xs:12,className:t.flexItem},r.a.createElement(v.a,{name:"submit",className:t.submitButton,onClick:function(){c(K("/accounts/description/",s)),c(L("profileStep","hashtags"))}},r.a.createElement(w.a,{color:"secondary"})))))))},Oe=a(63),je=a(331),ve=Object(T.a)((function(e){return{grow:{flexGrow:1},formTitle:{marginBottom:e.spacing(4)},submitButton:{margin:e.spacing(1)},hashtagsCards:{maxLength:"500px"},addButton:{margin:e.spacing(1)}}})),ye=function(e){var t=ve(),a=Object(l.b)(),c=Object(n.useState)({hashtags:e.usrHashtags?e.usrHashtags:[]}),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(["catperson","coffee","travel","vegan","netflixandchill","lol","book","gymrat","dance","lover","geek","42","outdoors","no-gym","dogperson"]),m=Object(b.a)(u,2),f=m[0],p=m[1],d=Object(n.useState)(""),g=Object(b.a)(d,2),E=g[0],h=g[1];Object(n.useEffect)((function(){s({hashtags:e.usrHashtags?e.usrHashtags:[]})}),[e.usrHashtags]),Object(n.useEffect)((function(){var e,t=Object(Oe.a)(f);t.map((function(a){return(e=i.hashtags.indexOf(a))>-1&&(e=t.indexOf(a),t.splice(e,1)),!0})),p(t)}),[i.hashtags]);var y=function(e){var t,n=Object(Oe.a)(f);(t=n.indexOf(e))>-1&&(n.splice(t,1),p(n)),(n=i.hashtags).push(e),s(Object(k.a)({},i,Object(x.a)({},J,n))),a(J(i))};return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"ImageUploadCard"},r.a.createElement(P.a,{className:t.formTitle,variant:"h2",align:"center"},"#matcha"),r.a.createElement(O.a,{container:!0,spacing:1,align:"center"},r.a.createElement(O.a,{item:!0,xs:12,md:8},r.a.createElement(j.a,{variant:"outlined",className:t.hashtagsCards},r.a.createElement(O.a,{container:!0,spacing:1},r.a.createElement((function(){return i.hashtags.map((function(e,t){return r.a.createElement(O.a,{item:!0,key:t},r.a.createElement(je.a,{id:e,color:"secondary",style:{color:"white"},onDelete:function(){return function(e){var t,n=i.hashtags;(t=n.indexOf(e))>-1&&(n.splice(t,1),s(Object(k.a)({},i,Object(x.a)({},J,n))),a(J(i)))}(e)},label:r.a.createElement("p",null,"#",e)}))}))}),null)))),r.a.createElement(O.a,{item:!0,xs:12,md:4},r.a.createElement(j.a,{variant:"outlined",className:t.hashtagsCards},r.a.createElement(O.a,{container:!0,spacing:2,justify:"flex-end"},r.a.createElement(I.a,{variant:"outlined",type:"text",fullWidth:!0,margin:"dense",value:E,InputProps:{startAdornment:r.a.createElement("p",null,"#")},onChange:function(e){e.target.value.length<=15&&h(e.target.value)}}),r.a.createElement(Q.a,{name:"submitHashtag",variant:"contained",color:"secondary",size:"small",className:t.addButton,onClick:function(){i.hashtags.indexOf(E,1)===parseInt(-1)&&E&&y(E),h("")}},"ADD"),r.a.createElement(O.a,{container:!0,spacing:1},r.a.createElement((function(){return f.map((function(e,t){return r.a.createElement(O.a,{item:!0,key:t},r.a.createElement(je.a,{clickable:!0,onClick:function(){return y(e)},label:r.a.createElement("p",null,"#",e)}))}))}),null))))),e.createProfile?r.a.createElement(O.a,{item:!0,xs:12,className:t.flexItem},r.a.createElement(v.a,{name:"submit",className:t.submitButton,onClick:function(){e.createProfile&&a(L("profileStep","orientationAndpreferences"))}},r.a.createElement(w.a,{color:"secondary"}))):r.a.createElement(r.a.Fragment,null)))))},we=Object(T.a)((function(e){return{grow:{flexGrow:1},formTitle:{marginBottom:e.spacing(4)},submitButton:{margin:e.spacing(1)}}})),xe=function(e){var t=we(),a=Object(l.b)(),c=Object(n.useState)(!1),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)({research_gender:e.research_gender?e.research_gender:"A",orientation:"bi"}),m=Object(b.a)(u,2),f=m[0],p=m[1];Object(n.useEffect)((function(){e.research_gender===e.gender?p(Object(k.a)({},f,{orientation:"gay"})):e.research_gender!==e.gender&&"A"!==e.research_gender?p(Object(k.a)({},f,{orientation:"hetero"})):p(Object(k.a)({},f,{orientation:"bi"})),s(!0)}),[]),Object(n.useEffect)((function(){!i&&e.research_gender||a(K("/accounts/research/gender/",{research_gender:f.research_gender}))}),[f.research_gender]);return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"Orientetion"},r.a.createElement(P.a,{className:t.formTitle,variant:"h4"},"I am..."),r.a.createElement(O.a,{container:!0,align:"center"},r.a.createElement(S.a,{"aria-label":"orientation",name:"orientation",value:f.orientation,onChange:function(t){t.target.value&&("hetero"===t.target.value?p(Object(k.a)({},f,{research_gender:"F"===e.gender?"M":"F",orientation:t.target.value})):"gay"===t.target.value?p(Object(k.a)({},f,{research_gender:e.gender,orientation:t.target.value})):"bi"===t.target.value&&p(Object(k.a)({},f,{research_gender:"A",orientation:t.target.value})))}},r.a.createElement(O.a,{item:!0,xs:12,md:4},r.a.createElement(_.a,{value:"hetero",control:r.a.createElement(A.a,null),label:"hetero"})),r.a.createElement(O.a,{item:!0,xs:12,md:4},r.a.createElement(_.a,{value:"gay",control:r.a.createElement(A.a,null),label:"gay"})),r.a.createElement(O.a,{item:!0,xs:12,md:4},r.a.createElement(_.a,{value:"bi",control:r.a.createElement(A.a,null),label:"bi"})))))))},ke=a(332),Te=a(306),Ce=Object(T.a)((function(e){return{grow:{flexGrow:1},formTitle:{marginBottom:e.spacing(4)},flexItem:{display:"flex",alignItems:"center",flexDirection:"column"}}})),Pe=function(e){var t=Ce(),a=Object(l.b)(),c=Object(n.useState)(!1),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)({research_perimeter:e.research_perimeter?e.research_perimeter:0,ageRange:[e.research_ageMin?e.research_ageMin:18,e.research_ageMax?e.research_ageMax:25]}),m=Object(b.a)(u,2),f=m[0],p=m[1];Object(n.useEffect)((function(){s(!0)}),[]);var d=function(){var e=Object(D.a)(B.a.mark((function e(t,a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(Object(k.a)({},f,{ageRange:a}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(i||!e.research_perimeter){var t=setTimeout((function(){a(K("/accounts/research/perimeter/",f))}),500);return function(){return clearTimeout(t)}}}),[f.research_perimeter]),Object(n.useEffect)((function(){if(i||!e.research_ageMax||!e.research_ageMin){var t=setTimeout((function(){a(K("/accounts/research/agemin/",{research_ageMin:f.ageRange[0]})),a(K("/accounts/research/agemax/",{research_ageMax:f.ageRange[1]}))}),500);return function(){return clearTimeout(t)}}}),[f.ageRange]),r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"slidersOptionsCard"},r.a.createElement(P.a,{className:t.formTitle,variant:"h4"},"I am looking for someone,"),r.a.createElement(O.a,{container:!0,align:"flex-start"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(P.a,{variant:"h5"},"around..."),r.a.createElement(O.a,{container:!0,spacing:2,direction:"row"},r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(ke.a,{value:"number"===typeof f.research_perimeter?f.research_perimeter:0,onChange:function(e,t){p(Object(k.a)({},f,{research_perimeter:t}))},color:"secondary",max:250,"aria-labelledby":"distance-slider"})),r.a.createElement(O.a,{item:!0,xs:4},r.a.createElement(Te.a,{name:"research_perimeter",className:t.input,value:f.research_perimeter,margin:"dense",onBlur:function(){f.research_perimeter<0?p(Object(k.a)({},f,{research_perimeter:0})):f.research_perimeter>250&&p(Object(k.a)({},f,{research_perimeter:250}))},onChange:function(e){p(Object(k.a)({},f,Object(x.a)({},e.target.name,""===e.target.value?"":Number(e.target.value))))},inputProps:{step:10,min:0,max:250,type:"number","aria-labelledby":"input-slider"}}),r.a.createElement(P.a,{variant:"body1"},"Km")))),r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(P.a,{variant:"h5"},"between..."),r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0,xs:8},r.a.createElement(ke.a,{value:f.ageRange,onChange:d,valueLabelDisplay:"auto",color:"secondary",min:18,max:99,"aria-labelledby":"age-range-slider"})),r.a.createElement(O.a,{item:!0,xs:4},r.a.createElement(P.a,{variant:"body1"},f.ageRange[0]," to ",f.ageRange[1]," years old"))))))))},Se=a(327),_e=function(){var e=Object(l.b)(),t=Object(E.f)(),a=Object(n.useState)(!1),c=Object(b.a)(a,2),o=c[0],i=c[1];return r.a.createElement(j.a,null,r.a.createElement(Q.a,{color:"secondary",fullWidth:!0,onClick:function(){return i(!0)}},"DELETE"),r.a.createElement(C.a,{open:o},r.a.createElement(Se.a,{color:"error",action:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{color:"inherit",size:"small",onClick:function(){return i(!1)}},"CANCEL"),r.a.createElement(Q.a,{color:"inherit",size:"small",onClick:function(){e((function(e){if(!R.a.get("token"))return e(L("auth",!1));U.a.delete("http://localhost:8080/accounts",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(t){R.a.remove("token"),e({type:"RESET_APP"})})).catch((function(e){console.log(e)}))})),t.push("/")}},"DELETE"))},"Are you sure you want to delete your account ?")))},Ae=function(){var e=Object(l.b)(),t=Object(n.useState)({mail:""}),a=Object(b.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),s=Object(b.a)(i,2),u=s[0],m=s[1];return r.a.createElement(O.a,{item:!0,component:j.a,xs:12},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),m(""),c.mail.length&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.mail)||m("email is not valid"),u.length||(e(K("/accounts/mail/",c)),o({mail:""}))}},r.a.createElement(O.a,{container:!0,spacing:6,direction:"column"},r.a.createElement(O.a,{item:!0},r.a.createElement(P.a,{variant:"h4"},"Update my email")),r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{name:"mail",value:c.mail,label:"New email",variant:"outlined",margin:"normal",error:Boolean(u),helperText:u,required:!0,onChange:function(e){o(Object(k.a)({},c,Object(x.a)({},e.target.name,e.target.value)))},fullWidth:!0})),r.a.createElement(O.a,{item:!0,align:"center"},r.a.createElement(v.a,{name:"submit",type:"submit"},r.a.createElement(w.a,{color:"secondary"}))))))},Ie=function(){var e=Object(l.b)(),t=Object(n.useState)({login:""}),a=Object(b.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),s=Object(b.a)(i,2),u=s[0],m=s[1];return r.a.createElement(O.a,{item:!0,component:j.a,xs:12},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),m(""),(!c.login||c.login.length<2||c.login.length>15)&&m("2 to 15 characters"),u.length||(e(K("/accounts/userLogin/",c)),o({login:""}))}},r.a.createElement(O.a,{container:!0,spacing:6,direction:"column"},r.a.createElement(O.a,{item:!0},r.a.createElement(P.a,{variant:"h4"},"Update my login")),r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{name:"login",value:c.login,label:"New login",variant:"outlined",margin:"normal",error:Boolean(u),helperText:u,required:!0,onChange:function(e){o(Object(k.a)({},c,Object(x.a)({},e.target.name,e.target.value)))},fullWidth:!0})),r.a.createElement(O.a,{item:!0,align:"center"},r.a.createElement(v.a,{name:"submit",type:"submit"},r.a.createElement(w.a,{color:"secondary"}))))))},Ne=a(333),Be=a(334),De=a(315),Me=a(267),Ue=a(155),Le=a.n(Ue),He=a(85),Ge=a.n(He),Fe=a(154),Re=a.n(Fe),qe=a(68),ze=a.n(qe),We=a(54),Ve=a.n(We),Je=Object(Me.a)((function(e){return{grow:{flexGrow:1},avatar:{transform:"scale(3)",margin:e.spacing(4)},icons:{transform:"scale(1.3)"}}})),Ke=function(e){var t=Je(),a=Object(E.f)(),n=Object(l.b)(),c=function(t,r){switch(r){case"block":n(Z("/accounts/block",{to_id:e.match.id})),window.location.reload();break;case"report":n(Z("/accounts/report",{to_id:e.match.id,message:"report"}));break;case"visitProfile":a.push("/matchProfile/"+e.match.id,{userInfos:e.match,usrId:e.match.id,currentUserId:e.currentUserId});break;case"dislike":n(Z("/unmatch",{to_id:e.match.id})),window.location.reload();break;case"chat":a.push("/chat/"+e.match.id+"/"+e.currentUserId)}};return r.a.createElement(j.a,null,r.a.createElement(O.a,{container:!0},r.a.createElement("div",{className:t.grow}),r.a.createElement(Ne.a,{title:"block",arrow:!0},r.a.createElement(v.a,{onClick:function(e){return c(0,"block")}},r.a.createElement(Ge.a,null))),r.a.createElement(Ne.a,{title:"report",arrow:!0},r.a.createElement(v.a,{onClick:function(e){return c(0,"report")}},r.a.createElement(Re.a,null)))),r.a.createElement(O.a,{container:!0,spacing:1,align:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(Be.a,{alt:e.match.firstname,src:e.match.profilePicture,className:t.avatar,onClick:function(e){return c(0,"visitProfile")}})),r.a.createElement(O.a,{container:!0,justify:"center"},r.a.createElement(P.a,{variant:"h4"},e.match.login),e.match.online?r.a.createElement(ze.a,{fontSize:"small",style:{color:"#8bc34a"}}):r.a.createElement(P.a,{variant:"body2",style:{color:"#757575"}},"last connection ",e.match.lastConnection))),r.a.createElement(De.a,null,r.a.createElement(Ne.a,{title:"unmatch",arrow:!0},r.a.createElement(v.a,{onClick:function(e){return c(0,"dislike")}},r.a.createElement(Ve.a,{className:t.icons,color:"secondary"}))),r.a.createElement("div",{className:t.grow}),r.a.createElement(v.a,{onClick:function(e){return c(0,"chat")}},r.a.createElement(Le.a,{className:t.icons,color:"secondary"}))))},Ye=function(){var e=Object(l.b)(),t=Object(n.useState)({passwd:"",repeatPasswd:""}),a=Object(b.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)({passwdError:null,repeatPasswdError:null}),s=Object(b.a)(i,2),u=s[0],m=s[1],f=function(e){o(Object(k.a)({},c,Object(x.a)({},e.target.name,e.target.value)))};return r.a.createElement(O.a,{item:!0,component:j.a,xs:12},r.a.createElement(O.a,{container:!0,spacing:1,direction:"column"},r.a.createElement(P.a,{variant:"h4"},"Update my password"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),function(){var e={};return(c.passwd.length<5||!/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/.test(c.passwd))&&(e.passwdError="min 5 char, 1 Upcase, 1 number"),c.repeatPasswd&&c.repeatPasswd===c.passwd||(e.repeatPasswdError="passwords don't match"),m(Object(k.a)({},e)),!Object.keys(e).length}()&&(e(K("/accounts/passwd/",c)),o({passwd:"",repeatPasswd:""}))}},r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{name:"passwd",value:c.passwd,label:"Password",type:"password",variant:"outlined",margin:"normal",error:Boolean(u.passwdError),helperText:u.passwdError,required:!0,onChange:f,fullWidth:!0})),r.a.createElement(O.a,{item:!0},r.a.createElement(I.a,{name:"repeatPasswd",value:c.repeatPasswd,label:"Password confimation",type:"password",variant:"outlined",margin:"normal",error:Boolean(u.repeatPasswdError),helperText:u.repeatPasswdError,required:!0,onChange:f,fullWidth:!0})),r.a.createElement(O.a,{item:!0,align:"center"},r.a.createElement(v.a,{name:"submit",type:"submit"},r.a.createElement(w.a,{color:"secondary"}))))))},Ze=a(316),$e=a(317),Xe=a(318),Qe=a(319),et=a(86),tt=a.n(et),at=Object(T.a)((function(e){return{grow:{flexGrow:1},halfGrow:{flexGrow:.35},iconButton:{transform:"scale(1.8)",margin:"25px"},likeButton:{marginLeft:"auto",transform:"scale(1.8)",margin:"25px"},avatar:{height:"100px",width:"100px"},hashtagBox:{maxHeight:"200px",overflow:"auto"},textInfos:{fontSize:20},botMarg:{marginBottom:e.spacing(3)}}})),nt=function(e){var t=at(),a=Object(l.b)(),c=Object(E.f)(),o=Object(n.useState)({lastConnection:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(e.location.state?e.location.state.userInfos.lastConnection:null)),location:""}),i=Object(b.a)(o,2),s=i[0],u=i[1];Object(n.useEffect)((function(){e.location.state||c.push("/")})),Object(n.useEffect)((function(){var t,a;e.location.state&&(t=e.location.state.userInfos.location.latitude,a=e.location.state.userInfos.location.longitude,fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+a+"&key=AIzaSyCH94qlFWu_Vp6qeV5NISrdDFChutvy5-0").then((function(e){e.json().then((function(e){if(!e.results[6])return"";u(Object(k.a)({},s,{location:e.results[6].formatted_address}))}))})).catch((function(e){return console.log(e)})))}),[e.location.state,s]);return r.a.createElement(r.a.Fragment,null,e.location.state?r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,lg:6,md:8,sm:10,xs:12},r.a.createElement(j.a,{id:"swipeBox",height:"auto"},r.a.createElement(Ze.a,null,r.a.createElement($e.a,{cellHeight:250,cols:2},e.location.state.userInfos.pictures.map((function(e){return r.a.createElement(Xe.a,{key:e,cols:1},r.a.createElement("img",{src:e,alt:e}))})))),r.a.createElement(Qe.a,null,r.a.createElement(O.a,{container:!0,spacing:1},r.a.createElement(O.a,{item:!0},r.a.createElement(Be.a,{alt:e.location.state.userInfos.firstname,src:e.location.state.userInfos.profilePicture,className:t.avatar})),r.a.createElement(O.a,{item:!0},r.a.createElement(O.a,{container:!0},r.a.createElement(P.a,{variant:"h4"},e.location.state.userInfos.login),e.location.state.userInfos.online?r.a.createElement(ze.a,{fontSize:"small",style:{color:"#8bc34a"}}):r.a.createElement(P.a,{variant:"body2",style:{color:"#757575"}},"last connection ",s.lastConnection))),r.a.createElement(O.a,{container:!0,spacing:5,className:t.botMarg},r.a.createElement("div",{className:t.halfGrow}),r.a.createElement(O.a,{item:!0},r.a.createElement(P.a,{variant:"body1",className:t.textInfos},e.location.state.userInfos.firstname," - ",e.location.state.userInfos.name),r.a.createElement(P.a,{variant:"body1",className:t.textInfos},e.location.state.userInfos.age," years old")),r.a.createElement("div",{className:t.halfGrow}),r.a.createElement(O.a,{item:!0},r.a.createElement(P.a,{variant:"body1",className:t.textInfos},s.location))),r.a.createElement(P.a,{variant:"body1"},e.location.state.userInfos.description),r.a.createElement("div",{className:t.grow}),r.a.createElement(O.a,{item:!0},r.a.createElement(Ne.a,{title:"block",arrow:!0},r.a.createElement(v.a,null,r.a.createElement(Ge.a,null))),r.a.createElement(Ne.a,{title:"report",arrow:!0},r.a.createElement(v.a,{onClick:function(){a(Z("/accounts/report",{to_id:s.usrId,message:"report"})),a(L("index",e.index+1))}},r.a.createElement(tt.a,null))))),r.a.createElement(O.a,{container:!0,spacing:1,className:t.hashtagBox},e.location.state.userInfos.hashtags.map((function(e,t){return r.a.createElement(O.a,{item:!0,key:t},r.a.createElement(je.a,{color:"secondary",label:r.a.createElement("p",null,"#",e)}))})))),r.a.createElement(De.a,null,r.a.createElement("div",{className:t.grow}),r.a.createElement(Ne.a,{title:"unmatch",arrow:!0},r.a.createElement(v.a,{"aria-label":"like",color:"secondary",className:t.likeButton,onClick:function(){a(Z("/likes",{to_id:e.usrId},e.index))}},r.a.createElement(Ve.a,null))))))):null)},rt=a(156),ct=a.n(rt),ot=Object(T.a)((function(e){return{grow:{flexGrow:1},halfGrow:{flexGrow:.35},iconButton:{transform:"scale(1.8)",margin:"25px"},likeButton:{marginLeft:"auto",transform:"scale(1.8)",margin:"25px"},avatar:{height:"100px",width:"100px"},hashtagBox:{maxHeight:"150px",overflowY:"scroll"},textInfos:{fontSize:20},botMarg:{marginBottom:e.spacing(3)}}})),it=function(e){var t=ot(),a=Object(l.b)(),c=e.userInfos,o=Object(n.useState)(c.lastConnection),i=Object(b.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),f=Object(b.a)(m,2),p=f[0],d=f[1],g=e.userInfos.location;Object(n.useEffect)((function(){var e=new Date(s);u(new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(e)),E(g.latitude,g.longitude)}),[]);var E=function(e,t){fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyCH94qlFWu_Vp6qeV5NISrdDFChutvy5-0").then((function(e){e.json().then((function(e){if(e.results[6]){var t=e.results[6].formatted_address;d(t)}else d("")}))})).catch((function(e){return console.log(e)}))};return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,lg:6,md:8,sm:10,xs:12},r.a.createElement(j.a,{id:"swipeBox",height:"auto"},r.a.createElement(Ze.a,null,r.a.createElement($e.a,{cellHeight:250,cols:2},c.pictures.map((function(e){return r.a.createElement(Xe.a,{key:e,cols:1},r.a.createElement("img",{src:e,alt:e}))})))),r.a.createElement(Qe.a,null,r.a.createElement(O.a,{container:!0,spacing:1},r.a.createElement(O.a,{item:!0},r.a.createElement(Be.a,{alt:c.firstname,src:c.profilePicture,className:t.avatar})),r.a.createElement(O.a,{item:!0},r.a.createElement(O.a,{container:!0},r.a.createElement(P.a,{variant:"h4"},c.login),c.online?r.a.createElement(ze.a,{fontSize:"small",style:{color:"#8bc34a"}}):r.a.createElement(P.a,{variant:"body2",style:{color:"#757575"}},"last connection ",s))),r.a.createElement(O.a,{container:!0,spacing:5,className:t.botMarg},r.a.createElement("div",{className:t.halfGrow}),r.a.createElement(O.a,{item:!0},r.a.createElement(P.a,{variant:"body1",className:t.textInfos},c.firstname," - ",c.name),r.a.createElement(P.a,{variant:"body1",className:t.textInfos},c.age," years old")),r.a.createElement("div",{className:t.halfGrow}),r.a.createElement(O.a,{item:!0},r.a.createElement(P.a,{variant:"body1",className:t.textInfos},p),r.a.createElement(P.a,{variant:"body1",className:t.textInfos},c.distance," meter away"))),r.a.createElement(O.a,{container:!0,justify:"center"},r.a.createElement(P.a,{variant:"subtitle2"},"compatibility ",parseInt(c.score),"% ")),r.a.createElement(P.a,{variant:"body1"},c.description),r.a.createElement("div",{className:t.grow}),r.a.createElement(O.a,{item:!0},r.a.createElement(v.a,{onClick:function(){a(Z("/accounts/report",{to_id:e.usrId,message:"report"})),a(L("index",e.index+1))}},r.a.createElement(tt.a,null)))),r.a.createElement(O.a,{container:!0,spacing:1,className:t.hashtagBox},c.hashtags.map((function(e,t){return r.a.createElement(O.a,{item:!0,key:t},r.a.createElement(je.a,{color:"secondary",label:r.a.createElement("p",null,"#",e)}))})))),r.a.createElement(De.a,null,r.a.createElement(v.a,{"aria-label":"dislike",edge:"start",className:t.iconButton,onClick:function(){a(L("index",e.index+1))}},r.a.createElement(ct.a,null)),r.a.createElement("div",{className:t.grow}),r.a.createElement(v.a,{"aria-label":"like",color:"secondary",className:t.likeButton,onClick:function(){var t;a(Z("/likes",{to_id:e.usrId,from_id:e.currentUser.id,like_id:"0"},e.index)),a((t="cibles",{type:"REMOVE_LIKED",index:e.index,objectName:t}))}},r.a.createElement(Ve.a,null))))))},lt=a(320),st=a(321),ut=a(322),mt=a(335),ft=a(157),pt=a.n(ft),dt=a(158),gt=a.n(dt),Et=a(160),ht=a.n(Et),bt=a(159),Ot=a.n(bt),jt=a(87),vt=a.n(jt),yt=Object(T.a)((function(e){return{root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},link:{textDecoration:"none"},titleLink:{textDecoration:"none",color:"inherit"},newNotif:{margin:20,padding:20,backgroundColor:"rgb(211, 47, 47, 0.2)",borderRadius:10,border:"1px solid rgb(211, 47, 47)"},oldNotif:{margin:20,padding:20,borderRadius:10,border:"1px solid rgb(211, 47, 47)"}}})),wt=function(){var e=yt(),t=Object(l.b)(),a=Object(n.useState)(!1),c=Object(b.a)(a,2),o=c[0],s=c[1],u=Object(l.c)((function(e){return e.objects.notifications})),m=Object(l.c)((function(e){return e.objects.currentUser})),f=Object(n.useState)(0),p=Object(b.a)(f,2),d=p[0],g=p[1];Object(n.useEffect)((function(){var e=0;u.forEach((function(t){t.status&&e++})),g(e)}),[u]);var E=function(){t((function(e){if(!R.a.get("token"))return e(L("auth",!1));U.a.post("http://localhost:8080/disconnect",null,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))})),R.a.remove("token"),t({type:"RESET_APP"}),vt()("http://localhost:8080").close()};return r.a.createElement("div",{className:e.root},r.a.createElement(lt.a,{position:"static",color:"default"},r.a.createElement(st.a,null,r.a.createElement(i.b,{to:"/",className:e.titleLink},r.a.createElement(P.a,{variant:"h6",className:e.title},"Matcha !")),r.a.createElement("div",{className:e.grow}),R.a.get("token")?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/match"},r.a.createElement(v.a,{"aria-label":"match"},r.a.createElement(Ve.a,{color:"secondary",fontSize:"large"}))),r.a.createElement(i.b,{to:"/profile"},r.a.createElement(v.a,{"aria-label":"profile"},r.a.createElement(pt.a,{color:"primary",fontSize:"large"}))),r.a.createElement(i.b,{to:"/settings"},r.a.createElement(v.a,{"aria-label":"settings"},r.a.createElement(gt.a,{color:"primary",fontSize:"large"}))),r.a.createElement(v.a,{"aria-label":"notifications",onClick:function(){s(!0),t(K("/notifications/read",{id:m.id})),t(V("/notifications")),function(){var e=0;u.forEach((function(t){t.status&&e++})),g(e)}()}},r.a.createElement(ut.a,{badgeContent:d,color:"secondary",overlap:"circle"},r.a.createElement(Ot.a,{color:"primary",fontSize:"large"}))),r.a.createElement(mt.a,{anchor:"right",open:o,onClose:function(){return s(!1)}},u.map((function(t,a){return r.a.createElement("div",{key:a},t.status?r.a.createElement("div",{key:a,className:e.newNotif},r.a.createElement(P.a,{variant:"body1",key:a},t.message)):r.a.createElement("div",{key:a,className:e.oldNotif},r.a.createElement(P.a,{variant:"body1",key:a},t.message)))}))),r.a.createElement(i.b,{to:"/",onClick:function(){return E()}},r.a.createElement(v.a,{"aria-label":"LogOut"},r.a.createElement(ht.a,{color:"secondary",fontSize:"large"})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/signUp",className:e.link},r.a.createElement(Q.a,{className:e.menuButton,color:"secondary",variant:"contained"},"Signup")),r.a.createElement(i.b,{to:"/logIn",className:e.link},r.a.createElement(Q.a,{className:e.menuButton,variant:"outlined"},"Login"))))))},xt=a(91),kt=a.n(xt),Tt=Object(T.a)((function(e){return{grow:{flexGrow:1},margBot:{marginBottom:e.spacing(2)},submitButton:{margin:e.spacing(1)}}})),Ct=function(e){var t=Tt(),a=Object(l.b)(),c=Object(n.useState)(!1),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)({latitude:e.latitude?e.latitude:0,longitude:e.longitude?e.longitude:0}),m=Object(b.a)(u,2),f=m[0],p=m[1],d=Object(n.useState)(""),g=Object(b.a)(d,2),E=g[0],h=g[1],v=Object(n.useState)(""),y=Object(b.a)(v,2),w=y[0],x=y[1];Object(n.useEffect)((function(){s(!0)}),[]),Object(n.useEffect)((function(){if(f.latitude&&f.longitude){i&&a(K("/accounts/locations",f));e=f.latitude,t=f.longitude,fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyCH94qlFWu_Vp6qeV5NISrdDFChutvy5-0").then((function(e){e.json().then((function(e){var t=e.results[0].formatted_address;h(t)}))})).catch((function(e){return console.log(e)}))}var e,t}),[f.latitude,f.longitude]);var k=function(){var e=Object(D.a)(B.a.mark((function e(t){var a,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(xt.geocodeByAddress)(t);case 2:return a=e.sent,e.next=5,Object(xt.getLatLng)(a[0]);case 5:n=e.sent,x(t),p({latitude:n.lat,longitude:n.lng});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12},r.a.createElement(j.a,{id:"Location"},r.a.createElement(P.a,{className:t.margBot,variant:"h4"},"I live in..."),r.a.createElement(P.a,{variant:"body1",className:t.margBot},E),r.a.createElement(O.a,{container:!0,align:"center"},r.a.createElement(kt.a,{value:w,onChange:function(e){x(e)},onSelect:k},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,c=e.loading;return r.a.createElement("div",null,r.a.createElement(I.a,t({placeholder:"address..."})),r.a.createElement("div",{style:{overflowY:"scroll"}},c?r.a.createElement("div",null,"...loading"):null,a.map((function(e){var t={backgroundColor:e.active?"#D32F2F":"#fff",color:e.active?"white":"black",display:"flex",maxWidth:"150px"};return r.a.createElement("div",n(e,{style:t}),e.description)}))))}))))))},Pt=a(161),St=a(162),_t=a(166),At=a(163),It=a(167),Nt=function(e){function t(e){var a;return Object(Pt.a)(this,t),(a=Object(_t.a)(this,Object(At.a)(t).call(this,e))).reqMessages=Object(D.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("http://localhost:8080/chats",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token"),to_id:a.state.to_id}}).then(function(){var e=Object(D.a)(B.a.mark((function e(t){var a,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a=t.data,n=[],a)n.push(a[r]);return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){e.length!==a.state.messages.length&&window.location.reload(!1)})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)}))),a.getMessages=Object(D.a)(B.a.mark((function e(){var t,n,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,U.a.get("http://localhost:8080/chats",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token"),to_id:a.state.to_id}}).then(function(){var e=Object(D.a)(B.a.mark((function e(a){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.push(a.data);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e.response)}));case 3:for(n in t[0])(r=a.state.messages.slice()).push(t[0][n]),a.setState({messages:r});case 4:case"end":return e.stop()}}),e)}))),a.getStyle=function(e){return e==a.state.from_id?{margin:"10px",display:"inline-block",position:"relative",width:"200px",height:"auto",backgroundColor:"rgb(137, 190, 255)",borderRadius:"10px",marginLeft:"auto"}:{margin:"10px",display:"inline-block",position:"relative",width:"200px",height:"auto",borderRadius:"10px",backgroundColor:"#e8e8e8"}},a.handleChangeInput=function(e){var t=e.currentTarget.value;a.setState({newMessage:t})},a.handleSubmit=Object(D.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({newMessage:""}),e.next=3,U.a.post("http://localhost:8080/chats",{from_id:a.state.from_id,to_id:a.state.to_id,message:a.state.newMessage},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(){window.location.reload(!1),U.a.post("http://localhost:8080/notifications/chat",{from_id:a.state.from_id,to_id:a.state.to_id,chat_id:"0"},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",token:R.a.get("token")}}).then((function(){console.log("notification sent")}))})).catch((function(e){console.log(e.response)}));case 3:case"end":return e.stop()}}),e)}))),a.myInterval=setInterval(a.reqMessages,2e3),a.state={messages:[],newMessage:"",to_id:e.match.params.to_id,from_id:e.match.params.from_id},a.styles={channelList:{display:"flex",flex:1,flexDirection:"column",maxHeight:"80%",width:"105%",overflowY:"scroll",overflowX:"hidden",bottom:0,position:"absolute",marginBottom:"130px"},container:{height:"80%",marginLeft:"20%",marginRight:"20%",position:"absolute",width:"60%",float:"left"},input:{width:"80%",float:"left",position:"absolute",bottom:0,marginBottom:"40px"},btn:{backgroundColor:"#ff3c58",color:"white",bottom:0,right:0,width:"15%",marginBottom:"40px",position:"absolute",height:"60px"},talkbubble:{margin:"10px",display:"inline-block",position:"relative",width:"200px",height:"auto",backgroundColor:"#e8e8e8",borderRadius:"10px"},talktext:{padding:"1em",textAlign:"left",lineHeight:"1.5em"},loginmsg:{marginLeft:"10px",marginTop:"10px",fontWeight:"bold"}},a.getMessages(),a}return Object(It.a)(t,e),Object(St.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:this.styles.container},r.a.createElement("div",{style:this.styles.channelList,id:"box_message"},this.state.messages.map((function(t){return r.a.createElement("div",{key:t.id,className:"talk-bubble",style:e.getStyle(t.from_id)},r.a.createElement("div",{style:e.styles.loginmsg},t.login),r.a.createElement("div",{className:"talktext",style:e.styles.talktext},r.a.createElement("p",null,t.message)))}))),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},r.a.createElement(I.a,{id:"multiline",variant:"filled",onChange:this.handleChangeInput,value:this.state.newMessage,style:this.styles.input}),r.a.createElement(Q.a,{variant:"contained",type:"submit",style:this.styles.btn},"Envoyer")))}}]),t}(n.Component),Bt=function(){var e=Object(E.f)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.objects.profileStep})),c=Object(l.c)((function(e){return e.objects.currentUser})),o=Object(n.useState)(!1),i=Object(b.a)(o,2),s=i[0],u=i[1];Object(n.useEffect)((function(){R.a.get("token")||e.push("/")})),Object(n.useEffect)((function(){c&&u(!0)}),[c]),Object(n.useEffect)((function(){s&&c&&c.profilePicture&&e.push("/profile")}),[s]);switch(a){case"picture":return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:6},c&&r.a.createElement(ge,{pictures:c.pictures,profilePicture:c.profilePicture})));case"description":return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:6},c&&r.a.createElement(be,{createProfile:"true",description:c.description})));case"hashtags":return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:6},c&&r.a.createElement(ye,{createProfile:"true",usrHashtags:c.hashtags})));case"orientationAndpreferences":return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:6},r.a.createElement(j.a,null,c&&r.a.createElement(xe,{gender:c.gender,research_gender:c.research_gender}),c&&r.a.createElement(Ct,{latitude:c.latitude,longitude:c.longitude}),c&&r.a.createElement(Pe,{research_perimeter:c.research_perimeter,research_ageMin:c.research_age_min,research_ageMax:c.research_age_max}),r.a.createElement(O.a,{item:!0,align:"center"},r.a.createElement(v.a,{name:"next",onClick:function(){t(L("profileStep",!1)),e.push("/profile")}},r.a.createElement(w.a,{color:"secondary"}))))));default:return r.a.createElement(O.a,{container:!0,spacing:1,justify:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:10,md:8,lg:6},c&&r.a.createElement(ge,{pictures:c.pictures})))}},Dt=function(){var e=Object(E.f)(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.objects.currentUser})),c=Object(l.c)((function(e){return e.objects.alert})),o=Object(l.c)((function(e){return e.objects.cibles})),i=Object(l.c)((function(e){return e.objects.index})),s=Object(n.useState)(!1),u=Object(b.a)(s,2),m=u[0],f=u[1];Object(n.useEffect)((function(){c&&f(!0)}),[c]),Object(n.useEffect)((function(){R.a.get("token")?a&&!a.profilePicture&&e.push("/create-profile"):e.push("/")}),[]),Object(n.useEffect)((function(){o&&i>=o.length&&t(L("index",0))}),[i,o,t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{open:m,autoHideDuration:6e3,transitionDuration:1e3,message:c,onClose:function(){f(!1),t(G("alert"))}}),R.a.get("token")?o&&o[i]&&a&&o.length?r.a.createElement(it,{userInfos:o[i],usrId:o[i].id,currentUser:a,index:i}):r.a.createElement(P.a,{variant:"h4",align:"center"},"Nobody's around !"):r.a.createElement("img",{src:"https://cdn.pixabay.com/photo/2016/10/06/05/19/engagement-1718244_960_720.jpg",alt:"background_picture",width:"100%"}))},Mt=function(e){var t=Object(E.f)(),a=Object(l.b)(),c=Object(l.c)((function(e){return e.objects.alert})),o=Object(n.useState)(!1),i=Object(b.a)(o,2),s=i[0],u=i[1];Object(n.useEffect)((function(){R.a.get("token")&&t.push("/profile")}),[]),Object(n.useEffect)((function(){c&&u(!0)}),[c]);return Object(n.useEffect)((function(){var t;e.match.params.token&&a((t=e.match.params.token,function(e){U.a.put("http://localhost:8080/accounts/confirm/"+t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"}}).then((function(t){e(L("alert","email verified !"))})).catch((function(e){console.log(e)}))}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,null),r.a.createElement(C.a,{open:s,autoHideDuration:5e3,transitionDuration:1e3,message:c,onClose:function(){u(!1),a(G("alert"))}}))},Ut=function(){var e=Object(l.b)(),t=Object(E.f)(),a=Object(l.c)((function(e){return e.objects.matches})),c=Object(l.c)((function(e){return e.objects.currentUser})),o=Object(l.c)((function(e){return e.objects.alert})),i=Object(n.useState)(!1),s=Object(b.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){R.a.get("token")||t.push("/")})),Object(n.useEffect)((function(){o&&m(!0)}),[o]);Object(n.useEffect)((function(){c&&!c.profilePicture&&t.push("/create-profile")}),[]);return r.a.createElement(O.a,{container:!0,spacing:1,justify:"space-evenly"},a&&a.length?a&&c&&r.a.createElement((function(){return a.length?a.map((function(e,t){return r.a.createElement(O.a,{item:!0,lg:2,md:4,sm:5,xs:11,key:t},r.a.createElement(Ke,{match:e,currentUserId:c.id}))})):null}),null):r.a.createElement(P.a,{variant:"h4"},"You don't have any match yet !"),r.a.createElement(C.a,{open:u,autoHideDuration:6e3,transitionDuration:1e3,message:o,onClose:function(){m(!1),e(G("alert"))}}))},Lt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(P.a,{variant:"h1",align:"center"},"404 ",r.a.createElement("br",null),"Page Not Found"))},Ht=function(){var e=Object(E.f)(),t=Object(l.c)((function(e){return e.objects.currentUser}));return Object(n.useEffect)((function(){R.a.get("token")?t&&!t.profilePicture&&e.push("/create-profile"):e.push("/")}),[]),r.a.createElement(O.a,{container:!0,justify:"space-evenly"},r.a.createElement(O.a,{item:!0,md:11,lg:10},r.a.createElement(O.a,{container:!0,justify:"space-evenly",wrap:"wrap",alignItems:"stretch"},r.a.createElement(O.a,{item:!0,md:12,lg:7},t&&t.profilePicture&&r.a.createElement(ge,{pictures:t.pictures,profilePicture:t.profilePicture})),r.a.createElement(O.a,{item:!0,md:12,lg:4},r.a.createElement(j.a,null,t&&r.a.createElement(xe,{gender:t.gender,research_gender:t.research_gender}),t&&t.profilePicture&&r.a.createElement(Ct,{latitude:t.location.latitude,longitude:t.location.longitude}),t&&r.a.createElement(Pe,{research_perimeter:t.research_perimeter,research_ageMin:t.research_age_min,research_ageMax:t.research_age_max}))),r.a.createElement(O.a,{item:!0,xs:12},t&&r.a.createElement(be,{description:t.description}),t&&r.a.createElement(ye,{usrHashtags:t.hashtags})))))},Gt=Object(T.a)((function(e){return{grow:{flexGrow:1,width:"100%"}}})),Ft=function(){var e=Gt(),t=Object(E.f)(),a=Object(l.b)(),c=Object(l.c)((function(e){return e.objects.currentUser})),o=Object(l.c)((function(e){return e.objects.alert})),i=Object(n.useState)(!1),s=Object(b.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){R.a.get("token")||t.push("/"),c&&!c.profilePicture&&t.push("/create-profile")})),Object(n.useEffect)((function(){o&&m(!0)}),[o]);return r.a.createElement(O.a,{container:!0,spacing:5,justify:"center",alignItems:"stretch"},r.a.createElement(O.a,{item:!0,md:3,xs:11},r.a.createElement(Ye,null)),r.a.createElement(O.a,{item:!0,md:3,xs:11},r.a.createElement(Ae,null)),r.a.createElement(O.a,{item:!0,md:3,xs:11},r.a.createElement(Ie,null)),r.a.createElement("div",{className:e.grow}),r.a.createElement(O.a,{item:!0,xs:11},r.a.createElement(_e,null)),r.a.createElement(C.a,{open:u,autoHideDuration:6e3,transitionDuration:1e3,message:o,onClose:function(){m(!1),a(G("alert"))}}))},Rt=function(){var e=Object(l.b)(),t=Object(E.f)(),a=Object(l.c)((function(e){return e.objects.currentUser})),c=Object(l.c)((function(e){return e.objects.auth}));return Object(n.useEffect)((function(){R.a.get("token")&&(e(W()),e(V("/matchs")))}),[e]),Object(n.useEffect)((function(){a&&(a.pictures&&!a.profilePicture&&t.push("/create-profile"),R.a.get("token")&&(e(L("auth",!0)),e(V("/cibles",a.location,a.research_perimeter)),e(V("/notifications"))))}),[a]),Object(n.useEffect)((function(){c&&function(e,t,a,n){e.on("connect",(function(){e.emit("join","USR"+t)})),e.on("notification",(function(e){console.log(e),a(n("/notifications"))})),e.on("disconnect",(function(){console.log("socket disconnected")}))}(vt()("http://localhost:8080"),a.id,e,V)}),[c]),r.a.createElement(s.a,{theme:g},r.a.createElement(h.a,null),r.a.createElement("div",{className:"App"},r.a.createElement(wt,null),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/",component:Dt,exact:!0}),r.a.createElement(E.a,{path:"/match",component:Ut}),r.a.createElement(E.a,{path:"/logIn",component:Mt}),r.a.createElement(E.a,{path:"/signUp",component:X}),r.a.createElement(E.a,{path:"/profile",component:Ht}),r.a.createElement(E.a,{path:"/settings",component:Ft}),r.a.createElement(E.a,{path:"/create-profile",component:Bt}),r.a.createElement(E.a,{path:"/matchProfile/:usrId",component:nt}),r.a.createElement(E.a,{path:"/accounts/confirm/:token",component:Mt}),r.a.createElement(E.a,{path:"/chat/:to_id/:from_id",component:Nt}),r.a.createElement(E.a,{component:Lt}))))},qt=a(69),zt=a(164),Wt=a(107),Vt=a.n(Wt),Jt={auth:!1,alert:null,profileStep:"picture",location:{},index:0,notifications:[]},Kt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,a=arguments.length>1?arguments[1]:void 0,n=a.objectName,r=a.object,c=a.type,o=a.item,i=a.data,l=a.index;switch(c){case"RESET_APP":return Jt;case"SET_OBJECT":if(!Vt.a.isEqual(t[n],r))return console.log("set_object",n),Object(k.a)({},t,Object(x.a)({},n,r));break;case"UPDATE_OBJECT":if(t[n]&&!Vt.a.isEqual(t[n],r))return console.log("update_object",n),Object(k.a)({},t,Object(x.a)({},n,Object(k.a)({},t[n],{},r)));break;case"REMOVE_OBJECT":return console.log("remove_object: ",n),Object(k.a)({},t,Object(x.a)({},n,null));case"ADD_ITEM":return(e=Object(Oe.a)(t[n][o])).push(i),Object(k.a)({},t,Object(x.a)({},n,Object(k.a)({},t[n],Object(x.a)({},o,e))));case"REMOVE_ITEM":var s=(e=Object(Oe.a)(t[n][o])).indexOf(i);return s>-1&&e.splice(s,1),Object(k.a)({},t,Object(x.a)({},n,Object(k.a)({},t[n],Object(x.a)({},o,e))));case"REMOVE_LIKED":var u=Object(Oe.a)(t[n]);return u.splice(l,1),Object(k.a)({},t,Object(x.a)({},n,u));default:return t}return t},Yt=Object(qt.c)({objects:Kt}),Zt=Object(qt.d)(Yt,Object(qt.a)(zt.a));o.a.render(r.a.createElement(l.a,{store:Zt},r.a.createElement(i.a,null,r.a.createElement(Rt,null))),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.5c027227.chunk.js.map